<!-- filters.html -->
<div class="bg-dark text-light text-center p-2 mb-1 border rounded shadow custom-size">
    <h5>Filter by Diameter</h5>
    <form method="GET" action="/" id="diameter-filter-form">
        <select name="diameter" multiple class="form-select" id="diameter-select" size="8">
            {% for diameter in diameters %}
            <option value="{{ diameter }}" {% if diameter in selected_diameters %}selected{% endif %}>
                {{ diameter }}
            </option>
            {% endfor %}
        </select>
    </form>
</div>

<!-- JavaScript to handle the form submission and selection styling -->
<script>
    document.getElementById('diameter-select').addEventListener('change', function() {
        document.getElementById('diameter-filter-form').submit();
    });

    // Add checkmarks to selected options
    const selectElement = document.getElementById('diameter-select');
    function updateOptions() {
        for (let option of selectElement.options) {
            option.textContent = option.selected ? 'âœ” ' + option.value : option.value;
        }
    }

    // Initial update
    updateOptions();

    // Update checkmarks when options are clicked
    selectElement.addEventListener('click', function() {
        updateOptions();
    });
</script>

<style>
    /* Ensure the custom styling for dark themes */
    .form-select {
        background-color: #343a40; /* Dark background color */
        color: #ffffff; /* White text color */
        border: 1px solid #6c757d; /* Border color */
    }

    .form-select option {
        background-color: #343a40; /* Dark background color for options */
        color: #ffffff; /* White text color for options */
    }

    .form-select option:checked {
        background-color: #495057; /* Slightly lighter background for selected options */
    }

    .form-select option:hover {
        background-color: #495057; /* Hover effect for better visibility */
    }
</style>